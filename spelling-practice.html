<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Spelling Practice â€“ PTEGuide.com</title>

<style>
body {
    font-family: -apple-system, BlinkMacSystemFont, sans-serif;
    background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
    margin: 0;
    padding: 16px;
    color: #fff;
}

h2 {
    text-align: center;
    margin-bottom: 16px;
}

.card {
    background: #ffffff;
    color: #333;
    border-radius: 12px;
    padding: 16px;
    margin-bottom: 16px;
    box-shadow: 0 6px 16px rgba(0,0,0,0.2);
}

button, select, input {
    width: 100%;
    padding: 12px;
    margin-top: 8px;
    font-size: 16px;
    border-radius: 8px;
    border: none;
}

select, input {
    border: 1px solid #ccc;
}

button {
    background: #007bff;
    color: #fff;
    font-weight: 600;
}

button:hover {
    background: #0056b3;
}

button.secondary {
    background: #6c757d;
}

button.secondary:hover {
    background: #545b62;
}

button.success {
    background: #28a745;
}

button.success:hover {
    background: #1e7e34;
}

.hidden {
    display: none;
}

.feedback {
    margin-top: 8px;
    font-weight: bold;
    text-align: center;
}

.feedback.correct {
    color: #28a745;
}

.feedback.incorrect {
    color: #dc3545;
}

#progressBar {
    width: 100%;
    height: 12px;
    background: #ddd;
    border-radius: 6px;
    overflow: hidden;
    margin-top: 8px;
}

#progressFill {
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg, #28a745, #7CFC00);
}

#progressText {
    text-align: center;
    margin-top: 4px;
    font-size: 14px;
}

#wordListBox {
    margin-top: 8px;
    font-size: 14px;
}
</style>
</head>

<body>

<h2>PTEGuide.com<br>Spelling Practice</h2>

<div class="card">
    <select id="profileSelect" onchange="switchProfile()">
        <option value="">Select Profile</option>
        <option>Zwala</option>
        <option>Ganga</option>
        <option>Poonam</option>
    </select>

    <input id="newWord" placeholder="Add new word">
    <button class="success" onclick="addWord()">Add Word</button>

    <button onclick="startPractice()">Start Practice</button>
    <button class="secondary" onclick="toggleWordList()">Show Word List</button>

    <div id="progressBar">
        <div id="progressFill"></div>
    </div>
    <div id="progressText"></div>
</div>

<div id="practiceArea" class="card hidden">
    <input id="userInput" placeholder="Type the spelling here">
    <button onclick="checkSpelling()">Check</button>
    <button class="secondary" onclick="speakCurrentWord()">ðŸ”Š Play Word</button>
    <button onclick="nextWord()">Next</button>

    <div id="feedback" class="feedback"></div>

    <button id="showBtn" class="secondary hidden" onclick="showAnswer()">Show Answer</button>
    <div id="answer"></div>
</div>

<div id="wordListBox" class="card hidden"></div>

<script>
let profiles = ["Zwala", "Ganga", "Poonam"];
let currentProfile = "";
let words = [];
let sessionWords = [];
let currentIndex = 0;
let currentWord = "";
let practicedThisSession = new Set();

const profilePINs = {
    Zwala: "321",
    Ganga: "654",
    Poonam: "987"
};

function loadWords() {
    words = JSON.parse(localStorage.getItem("words_" + currentProfile)) || [];
}

function saveWords() {
    localStorage.setItem("words_" + currentProfile, JSON.stringify(words));
}

function switchProfile() {
    const selected = profileSelect.value;
    if (!selected) return;

    const pin = prompt(`Enter PIN for ${selected}`);
    if (pin !== profilePINs[selected]) {
        alert("Incorrect PIN");
        profileSelect.value = "";
        return;
    }

    currentProfile = selected;
    localStorage.setItem("lastProfile", currentProfile);
    loadWords();
    updateProgress();
    alert(`Welcome ${currentProfile}`);
}

function addWord() {
    if (!currentProfile) return alert("Select profile first");
    const w = newWord.value.trim().toLowerCase();
    if (w && !words.includes(w)) {
        words.push(w);
        saveWords();
    }
    newWord.value = "";
    updateWordListDisplay();
}

function startPractice() {
    if (!words.length) return alert("Add words first");
    sessionWords = [...words].sort(() => Math.random() - 0.5);
    currentIndex = 0;
    practicedThisSession.clear();
    practiceArea.classList.remove("hidden");
    speakCurrentWord();
}

function speakCurrentWord() {
    speechSynthesis.cancel();
    currentWord = sessionWords[currentIndex];
    const u = new SpeechSynthesisUtterance(currentWord);
    u.lang = "en-US";
    speechSynthesis.speak(u);
    userInput.value = "";
    feedback.textContent = "";
    showBtn.classList.add("hidden");
    practicedThisSession.add(currentWord);
    updateProgress();
}

function nextWord() {
    if (currentIndex < sessionWords.length - 1) {
        currentIndex++;
        speakCurrentWord();
    } else {
        alert("ðŸŽ‰ You have practiced all words!");
    }
}

function checkSpelling() {
    if (userInput.value.trim().toLowerCase() === currentWord) {
        feedback.textContent = "Correct âœ”";
        feedback.className = "feedback correct";
    } else {
        feedback.textContent = "Incorrect âœ–";
        feedback.className = "feedback incorrect";
        showBtn.classList.remove("hidden");
    }
}

function showAnswer() {
    answer.textContent = "Correct spelling: " + currentWord;
}

function updateProgress() {
    const p = words.length ? practicedThisSession.size / words.length * 100 : 0;
    progressFill.style.width = p + "%";
    progressText.textContent = practicedThisSession.size + " / " + words.length;
}

function toggleWordList() {
    wordListBox.classList.toggle("hidden");
    updateWordListDisplay();
}

function updateWordListDisplay() {
    wordListBox.innerHTML = words.length
        ? "<strong>Listed Words:</strong><br>" + words.join(", ")
        : "No words added yet.";
}

document.addEventListener("DOMContentLoaded", () => {
    const last = localStorage.getItem("lastProfile");
    if (last && profiles.includes(last)) {
        profileSelect.value = last;
    }
});
</script>

</body>
</html>
